<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Document</title>
    <style>
        body{
            overflow-x: hidden;
        }
        .border {
            border-bottom: 5px solid black;
        }

        .outcard {
            display: grid;
           grid-template-columns: 1fr 1fr 1fr;
           grid-template-rows: 1fr 1fr;
           gap: 1rem;
           
           
        }
        .card1,.card2{
            height: 200px;
            margin-left: 20px;
            margin-bottom: 10px;
        }
        .card3,.card4{
            margin-bottom: 100px;
            height: 200px;
              margin-left: 20px;
          
        }
        .card1{
          
           height: 100px;
           width: 30%;
           position: relative;
           left: 35%;
           margin-bottom: 30px;
        }


   
.card {
  animation: fadeSlideIn 2s ease forwards;
}


 /* .card1 { animation-delay: 0s; }
.card2 { animation-delay: 1s; }
.card3 { animation-delay: 1.5s; }
.card4 { animation-delay: 2s; }  */

/* Keyframes for fade + slide effect */
@keyframes fadeSlideIn {
    from{
        opacity: 0;
      position: relative;
      left: 1000px;
    }
  to {
    opacity: 1;
  }
}
   
    </style>

</head>

<body>

    <header class=" m-5">


        <div class="input-group">
            <select name="search" id="search" class="form-select">
                <option value="" disabled selected>Please choose an option</option>
                <option value="Diabetes">Diabetes</option>
                <option value="High Blood Pressure">HighBloodPressure</option>
                <option value="Thyroid">Thyroid</option>
            </select>

        </div>


        <table class="table  m-5" id="table">

        </table>


    </header>


    <main class="fluid-container">
        <h3 class="mx-5">Healthcare Data Analysis</h3>

        <form class="mx-5" onsubmit="clicking(event)">
            <div class="mb-3">
                <label for="name" class="form-label">Name:</label>
                <input type="text" class="form-control" id="name">

            </div>

            <div class="d-flex mb-3 mt-4">
                <label for="form-label ">Gender:</label>
                <div class="form-check  mx-2">

                    <label class="form-check-label" for="male">Male</label>
                    <input type="radio" class="form-check-input" name="gender" id="male" value="male">

                </div>

                <div class="form-check">
                    <label class="form-check-label" for="female">Female</label>
                    <input type="radio" class="form-check-input" name="gender" id="female" value="female">

                </div>
            </div>



            <div class="mb-3">
                <label for="age" class="form-label">Age:</label>
                <input type="number" class="form-control" id="age">

            </div>



            <div class="mb-3">
                <div class="input-group">
                    <select name="search" id="searching" class="form-select">
                        <option value="" disabled selected>Please choose an option</option>
                        <option value="0">Diabetes</option>
                        <option value="1">HighBloodPressure</option>
                        <option value="2">Thyroid</option>
                    </select>

                </div>
            </div>






            <button type="submit" class="btn btn-primary text-center d-block m-auto mt-5" id="add" >Add Patient</button>
        </form>

    </main>


    <footer class="footer">
        <h3 class="text-center m-5">Analysis Report</h3>


         <div class="card card1">
                                     
                                     <div class="card-body">
                                       
                                       <h3 class="card-text" id="num">Number of patients:0</h3>
                                       </div>
                                </div>


        <div class="outcard">
                            
                                   <div class="card  card2 ">
                                   
                                                 <div class="card-body">
                                                 <h3 class="card=title"> Conditions Breakdown</h3>
                                                     <p class="card-text" id="alld">Diabetes:0</p>
                                                       <p class="card-text" id="allt">Thyroid:0</p>
                                                         <p class="card-text" id="allh">High Blood Pressure:0</p>
                                                          </div>
                                     </div>
                               

                                  <div class="card card3">
                                 
                                     <div class="card-body">
                                       <h3 class="card=title"> Male-Based-Conditions</h3>
                                      
                                         <p class="card-text" id="md">Diabetes:0</p>
                                           <p class="card-text" id="mt">Thyroid:0</p>
                                               <p class="card-text" id="mh">High Blood Pressure:0</p>

                                          
                                </div>
            </div>



              <div class="card card4">
                                 
                                     <div class="card-body">
                                       <h3 class="card=title"> Female-Based-Conditions</h3>
                                    
                                         <p class="card-text" id="fd">Diabetes:0</p>
                                           <p class="card-text" id="ft">Thyroid:0</p>
                                               <p class="card-text" id="fh">High Blood Pressure:0</p>

                                              
                                          
                                </div>
            </div>
        

        


    </footer>



    <script>
      let  diabetes=0;
      let  blood=0;
      let  thyroid=0;
        let malediabetes=0;
        let maleblood=0;
        let malethyroid=0;

        let femalediabetes=0;
        let femaleblood=0;
        let femalethyroid=0;

        let update=document.getElementById("num");
        let option = document.getElementById("search");
        option.addEventListener("change", valuechanged);
        let table = document.getElementById("table");

        let patient=document.getElementById("add");
        let patients=0;

        function valuechanged() {

            let selectedValue = option.value;
            let selectedText = option.options[option.selectedIndex].text;

            table.innerHTML = "";
            let newrow = document.createElement("tr");
            let newhead1 = document.createElement("th");
            newhead1.textContent = "Name";
            let newhead2 = document.createElement("th");
            newhead2.textContent = "Symptoms";
            let newhead3 = document.createElement("th");
            newhead3.textContent = "Prevention";
            let newhead4 = document.createElement("th");
            newhead4.textContent = "Treatment";
            let newhead5 = document.createElement("th");
            newhead5.textContent = "image";
            newrow.appendChild(newhead1);
            newrow.appendChild(newhead2);
            newrow.appendChild(newhead3);
            newrow.appendChild(newhead4);
            newrow.appendChild(newhead5);
            newrow.classList.add("border")
            table.appendChild(newrow);
            fetchsearch(selectedValue, table);



        }

        function fetchsearch(value) {

            let url = './health_analysis.json'
            axios.get(url)
                .then(response => {
                    let found = response.data.conditions.find(data => data.name === value);
                    let td1 = document.createElement("td");
                    let td2 = document.createElement("td");
                    let td3 = document.createElement("td");
                    let td4 = document.createElement("td");
                    let td5 = document.createElement("td");
                    td1.textContent = `${found.name}`;
                    td2.textContent = `${found.symptoms}`;
                    td3.textContent = `${found.prevention}`;
                    td4.textContent = `${found.treatment}`;
                    td5.innerHTML = `<img src="${found.imagesrc}" class="mb-5">`;

                    table.appendChild(td1);
                    table.appendChild(td2);
                    table.appendChild(td3);
                    table.appendChild(td4);
                    table.appendChild(td5);



                })
        }
function clicking(event){
    event.preventDefault();
    let searching =document.getElementById("searching").value;
  patients++;
update.textContent=`Number of patients:${patients}`;
let male=document.getElementById("male");
let female=document.getElementById("female");
console.log(searching);
if(searching==="0"){
    if(male.checked){
        malediabetes++;
        diabetes++;
}
else if(female.checked){
    femalediabetes++;
    diabetes++;

}

 
}
else if(searching==="1"){
    if(male.checked){
        maleblood++;
        blood++;

  
}
else if(female.checked){
    femaleblood++;
    blood++;

}


}
else if(searching==="2"){
        if(male.checked){
        malethyroid++;
        thyroid++

  
}
else if(female.checked){
    femalethyroid++;
    thyroid++;

}

}
document.getElementById("alld").textContent=`Diabetes:${diabetes}`;
document.getElementById("allh").textContent=`High Blood Pressure:${blood}`;
document.getElementById("allt").textContent=`Thyroid:${thyroid}`;

document.getElementById("md").textContent=`Diabetes:${malediabetes}`;
document.getElementById("mh").textContent=`High Blood Pressure:${maleblood}`;
document.getElementById("mt").textContent=`Thyroid:${malethyroid}`;

document.getElementById("fd").textContent=`Diabetes:${femalediabetes}`;
document.getElementById("fh").textContent=`High Blood Pressure:${femaleblood}`;
document.getElementById("ft").textContent=`Thyroid:${femalethyroid}`;




}


    </script>
</body>

</html>